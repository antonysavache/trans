# Transaction Spy

Сервис для отслеживания транзакций на TRON кошельках.

## Описание

Transaction Spy - это сервис, который периодически проверяет транзакции на указанных кошельках TRON. Адреса кошельков хранятся в Google Таблице, что позволяет легко управлять списком отслеживаемых адресов.

## Функциональность

- Чтение списка кошельков из Google Таблицы
- Получение информации о транзакциях через TRON API
- Периодический запуск процесса сканирования (по умолчанию каждый час)
- API-эндпоинты для проверки статуса и ручного запуска сканирования

## Настройка окружения

1. Создайте файл `.env` на основе примера:

```
# Google Sheets Configuration
GOOGLE_SHEETS_API_KEY=your_api_key_here
GOOGLE_SHEET_ID=your_sheet_id_here
GOOGLE_SHEET_RANGE=Sheet1!A2:D

# TRON API Configuration
TRON_API_URL=https://api.trongrid.io
TRON_API_KEY=your_tron_api_key_here

# Application Configuration
CHECK_INTERVAL_MINUTES=60
```

2. Получите API-ключ для Google Sheets:
   - Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
   - Создайте новый проект
   - Включите Google Sheets API
   - Создайте API-ключ и укажите его в .env

3. Получите API-ключ для TRON:
   - Зарегистрируйтесь на [TRON Grid](https://www.trongrid.io/)
   - Создайте новый API-ключ
   - Укажите ключ в .env файле

4. Настройте Google Таблицу:
   - Создайте таблицу со следующими столбцами:
     - A: Адрес кошелька
     - B: Имя кошелька (опционально)
     - C: Описание (опционально)
     - D: Время последней проверки (таймстамп)
   - Не забудьте дать доступ к таблице с помощью API-ключа

## Установка и запуск

```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run start:dev

# Сборка проекта
npm run build

# Запуск в продакшн-режиме
npm run start:prod
```

## API Эндпоинты

- `GET /wallet-tracker/status` - Статус сервиса
- `GET /wallet-tracker/wallets` - Список отслеживаемых кошельков
- `GET /wallet-tracker/transactions/:walletAddress` - Получить транзакции для конкретного кошелька
- `POST /wallet-tracker/track` - Ручной запуск сканирования

## Структура Google Таблицы

Таблица должна иметь следующие столбцы:
- A: Адрес кошелька (обязательно)
- B: Имя кошелька (опционально)
- C: Описание (опционально)
- D: Время последней проверки (таймстамп в формате unix timestamp)

Пример:
```
Адрес                               | Имя       | Описание      | Время последней проверки
------------------------------------------------------------------------------------
TQn9Y2khEsLJW1ChVWFMSMeRDow5KcbLSE  | Кошелек 1 | Основной счет | 1613456789
TWyQRQkxYW8CtW5ytn4vJV3BVpAfMBjJca  | Кошелек 2 | Резервный    | 1613456789
```

## Производственное использование

Для использования в продакшн-окружении рекомендуется:

1. Настроить постоянное хранение транзакций (например, в MongoDB или PostgreSQL)
2. Добавить систему уведомлений (например, по email или в Telegram)
3. Добавить мониторинг и логирование с помощью сервисов типа Prometheus/Grafana
4. Запускать приложение с помощью процесс-менеджера, например, PM2
# trans
